$((function(){Highcharts.setOptions({lang:{downloadCSV:"Descargar CSV",downloadJPEG:"Descargar JPEG",downloadPDF:"Descargar PDF",downloadPNG:"Descargar PNG",downloadSVG:"Descargar SVG",downloadXLS:"Descargar XLS",exportData:{annotationHeader:"Annotations",categoryDatetimeHeader:"DateTime",categoryHeader:"Categoría"},decimalPoint:",",thousandsSep:"."}}),grafico1=function(){$.ajax({type:"POST",url:window.location.origin+"/dashboard/grafico1",headers:{"X-CSRF-Token":$("meta[name='csrf-token']").attr("content")},data:{fecha:$("select[name=fechaGrafico1]").val()},dataType:"json",success:function(o){Highcharts.chart("grafico-1",{chart:{type:"pie",backgroundColor:"#FFFFFF"},exporting:{sourceHeight:500,sourceWidth:1200,scale:1,buttons:{contextButton:{menuItems:["downloadPNG","downloadJPEG","downloadPDF","downloadSVG","separator","downloadCSV","downloadXLS"]}}},credits:{enabled:!1},title:{text:o.title},subtitle:{text:o.subtitle},accessibility:{point:{valueSuffix:"%"}},tooltip:{shared:!0,useHTML:!0,headerFormat:"<b>{point.key}</b><br>",pointFormat:"Total: <b>{point.y}</b><br>Porcentaje: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,showInLegend:!0,cursor:"pointer",dataLabels:{enabled:!1,format:"<b>{point.name}</b><br>{point.percentage:.1f} %",distance:-50}}},series:[{name:"Formularios",colorByPoint:!0,data:[{name:"Promo Odonto",y:o.promoodonto,sliced:!0,selected:!0,color:"#8BB8EF"},{name:"Promo Estética",y:o.promoestetica,color:"#DBABD5"}]}]})},error:function(o,t,e){console.log(o),console.log(t),console.log(e)}})},grafico2=function(){$.ajax({type:"POST",url:window.location.origin+"/dashboard/grafico2",headers:{"X-CSRF-Token":$("meta[name='csrf-token']").attr("content")},data:{fecha:$("select[name=fechaGrafico2]").val()},dataType:"json",success:function(o){Highcharts.chart("grafico-2",{chart:{type:"pie",backgroundColor:"#FFFFFF"},exporting:{sourceHeight:500,sourceWidth:1200,scale:1,buttons:{contextButton:{menuItems:["downloadPNG","downloadJPEG","downloadPDF","downloadSVG","separator","downloadCSV","downloadXLS"]}}},credits:{enabled:!1},title:{text:"Total por estados"},subtitle:{text:o.subtitle},accessibility:{point:{valueSuffix:"%"}},tooltip:{shared:!0,useHTML:!0,headerFormat:"<b>{point.key}</b><br>",pointFormat:"Total: <b>{point.y}</b><br>Porcentaje: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,showInLegend:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.percentage:.1f} %</b>",distance:-50,filter:{property:"percentage",operator:">",value:2}}}},series:[{name:"Formularios",colorByPoint:!0,data:[{name:"Pendiente",color:"#FFC107",y:o.pendiente},{name:"Contactado",color:"#28A745",y:o.contactado,sliced:!0,selected:!0},{name:"No contesta",color:"#6C757D",y:o.nocontesta}]}]})},error:function(o,t,e){console.log(o),console.log(t),console.log(e)}})},grafico3=function(){$.ajax({type:"POST",url:window.location.origin+"/dashboard/grafico3",headers:{"X-CSRF-Token":$("meta[name='csrf-token']").attr("content")},data:{cantmeses:$("select[name=cantmeses]").val()},dataType:"json",success:function(o){Highcharts.chart("grafico-3",{chart:{type:"column",backgroundColor:"#FFFFFF"},exporting:{sourceHeight:500,sourceWidth:1200,scale:1,buttons:{contextButton:{menuItems:["downloadPNG","downloadJPEG","downloadPDF","downloadSVG","separator","downloadCSV","downloadXLS"]}}},credits:{enabled:!1},title:{text:"Análisis actividad últimos 6 meses"},xAxis:{categories:o.categories},yAxis:{min:0,title:{text:""},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:Highcharts.defaultOptions.title.style&&Highcharts.defaultOptions.title.style.color||"gray"}}},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",backgroundColor:Highcharts.defaultOptions.legend.backgroundColor||"rgba(255,255,255,0.25)"},tooltip:{headerFormat:"<b>{point.x}</b><br/>",pointFormat:"{series.name}: {point.y}<br/>Total: {point.stackTotal}"},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}},series:[{name:"Promo Odonto",data:o.promoodonto,color:"#8BB8EF"},{name:"Promo Estética",data:o.promoestetica,color:"#DBABD5"}]})},error:function(o,t,e){console.log(o),console.log(t),console.log(e)}})},grafico4=function(){$.ajax({type:"POST",url:window.location.origin+"/dashboard/grafico4",headers:{"X-CSRF-Token":$("meta[name='csrf-token']").attr("content")},data:{fecha:$("select[name=fecha]").val()},dataType:"json",success:function(o){Highcharts.chart("grafico-4",{chart:{type:"line",backgroundColor:"#FFFFFF"},exporting:{sourceHeight:500,sourceWidth:1200,scale:1,buttons:{contextButton:{menuItems:["downloadPNG","downloadJPEG","downloadPDF","downloadSVG","separator","downloadCSV","downloadXLS"]}}},credits:{enabled:!1},title:{text:o.title},xAxis:{categories:o.categories},yAxis:{min:0,title:{text:""},stackLabels:{enabled:!0,style:{fontWeight:"bold",color:Highcharts.defaultOptions.title.style&&Highcharts.defaultOptions.title.style.color||"gray"}}},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom",backgroundColor:Highcharts.defaultOptions.legend.backgroundColor||"rgba(255,255,255,0.25)"},tooltip:{shared:!0,crosshairs:!0},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}},series:[{name:"Promo Odonto",data:o.promoodonto,color:"#8BB8EF"},{name:"Promo Estética",data:o.promoestetica,color:"#DBABD5"}]})},error:function(o,t,e){console.log(o),console.log(t),console.log(e)}})},grafico1(),grafico2(),grafico3(),grafico4(),$("#btn-grafico-1").click(grafico1),$("#btn-grafico-2").click(grafico2),$("#btn-grafico-3").click(grafico3),$("#btn-grafico-4").click(grafico4)}));
